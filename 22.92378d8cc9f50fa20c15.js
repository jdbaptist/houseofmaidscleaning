(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{SX0Z:function(e,c,t){"use strict";t.r(c),t.d(c,"NotificationsModule",(function(){return Z}));var n=t("ofXK"),i=t("tyNb"),l=t("QZ3f"),s=t("HDdC"),r=t("D0XW"),o=t("Y7HM");function u(e){const{subscriber:c,counter:t,period:n}=e;c.next(t),this.schedule({subscriber:c,counter:t+1,period:n},n)}var a=t("kt0X"),d=t("qBNx"),f=t("zaDT"),b=t("dgI+"),m=t("AytR"),p=t("0IaG"),g=t("fXoL"),v=t("3Pt+"),h=t("kmnG");function y(e,c){1&e&&(g.ec(0,"span"),g.Yc(1," Reason is required"),g.dc())}function I(e,c){if(1&e&&(g.ec(0,"mat-error"),g.Wc(1,y,2,0,"span",5),g.dc()),2&e){g.tc();const e=g.Lc(4);g.Mb(1),g.Ac("ngIf",null==e||null==e.controls||null==e.controls.reason?null:e.controls.reason.hasError("required"))}}let B=(()=>{class e{constructor(e,c,t){this.store=e,this.dialogRef=c,this.id=t}ngOnInit(){}onSubmit(e){var c,t;const n={reason:null===(c=null==e?void 0:e.value)||void 0===c?void 0:c.reason};this.reason=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.reason,this.store.dispatch(Object(b.e)({notificationId:this.id,reason:n})),this.close()}close(){this.dialogRef.close({status:!1})}}return e.\u0275fac=function(c){return new(c||e)(g.Zb(a.h),g.Zb(p.e),g.Zb(p.a))},e.\u0275cmp=g.Tb({type:e,selectors:[["app-reason-for-reject"]],decls:13,vars:1,consts:[[1,"mb-3"],[3,"ngSubmit"],["reasonForm","ngForm"],[1,"form-group"],["rows","7","cols","35","name","reason","required","","ngModel",""],[4,"ngIf"],[1,"form-group","text-center"],[1,"btn","btn-primary"]],template:function(e,c){if(1&e){const e=g.fc();g.ec(0,"div"),g.ec(1,"label",0),g.Yc(2,"Write reason for rejection"),g.dc(),g.ec(3,"form",1,2),g.pc("ngSubmit",(function(){g.Nc(e);const t=g.Lc(4);return c.onSubmit(t)})),g.ec(5,"div",3),g.ec(6,"textarea",4),g.Yc(7,"\n            "),g.dc(),g.ac(8,"br"),g.Wc(9,I,2,1,"mat-error",5),g.dc(),g.ec(10,"div",6),g.ec(11,"button",7),g.Yc(12," Submit "),g.dc(),g.dc(),g.dc(),g.dc()}if(2&e){const e=g.Lc(4);g.Mb(9),g.Ac("ngIf",((null==e?null:e.submitted)||(null==e.controls||null==e.controls.reason?null:e.controls.reason.touched))&&""===(null==e.controls||null==e.controls.reason?null:e.controls.reason.value))}},directives:[v.y,v.n,v.o,v.c,v.u,v.m,v.p,n.n,h.a],styles:[""]}),e})();var j=t("OC8m");function M(e,c){if(1&e&&g.ac(0,"img",15),2&e){const e=g.tc().$implicit,c=g.tc(2);g.Ac("src",c.imgUrl+(null==e||null==e.user?null:e.user.profileImage),g.Pc)("alt",(null==e||null==e.servicerequests?null:e.servicerequests.firstname)+" "+(null==e||null==e.servicerequests?null:e.servicerequests.lastname))}}function A(e,c){1&e&&g.ac(0,"img",16)}function Y(e,c){if(1&e){const e=g.fc();g.ec(0,"div",17),g.ec(1,"button",18),g.pc("click",(function(){g.Nc(e);const c=g.tc().$implicit;return g.tc(2).serviceDecision(!0,c._id)})),g.Yc(2,"Accept"),g.dc(),g.ec(3,"button",19),g.pc("click",(function(){g.Nc(e);const c=g.tc().$implicit;return g.tc(2).openDialogReasonForReject(c._id)})),g.Yc(4,"Reject"),g.dc(),g.dc()}}function w(e,c){if(1&e&&(g.ec(0,"div",6),g.Wc(1,M,1,2,"img",7),g.Wc(2,A,1,0,"img",8),g.ec(3,"div",9),g.ec(4,"div",10),g.ec(5,"h6",11),g.Yc(6),g.dc(),g.ec(7,"span",12),g.Yc(8),g.uc(9,"date"),g.uc(10,"date"),g.dc(),g.dc(),g.ec(11,"p",13),g.Yc(12),g.ac(13,"br"),g.Yc(14),g.dc(),g.Wc(15,Y,5,0,"div",14),g.dc(),g.dc()),2&e){const e=c.$implicit;g.Mb(1),g.Ac("ngIf",null==e||null==e.user?null:e.user.profileImage),g.Mb(1),g.Ac("ngIf",!(null!=e&&null!=e.user&&e.user.profileImage)),g.Mb(4),g.ad("You have new job for ",null==e||null==e.service?null:e.service.service,""),g.Mb(2),g.bd("",g.xc(9,9,e.createdAt,"mediumDate","UTC")," | ",g.wc(10,13,e.createdAt,"shortTime"),""),g.Mb(4),g.bd(" ",null==e||null==e.servicerequests?null:e.servicerequests.firstname," ",null==e||null==e.servicerequests?null:e.servicerequests.lastname," "),g.Mb(2),g.ad(" ",null==e||null==e.servicerequests?null:e.servicerequests.body," "),g.Mb(1),g.Ac("ngIf","request"==e.notificationType)}}function q(e,c){if(1&e&&(g.ec(0,"div",2),g.ec(1,"div",3),g.ec(2,"h2"),g.Yc(3,"Notifications"),g.dc(),g.dc(),g.ec(4,"div",4),g.Wc(5,w,16,16,"div",5),g.ac(6,"hr"),g.dc(),g.dc()),2&e){const e=g.tc();g.Mb(5),g.Ac("ngForOf",e.noti)}}function W(e,c){if(1&e&&g.ac(0,"img",15),2&e){const e=g.tc().$implicit,c=g.tc(2);g.Ac("src",c.imgUrl+(null==e||null==e.acceptedBy?null:e.acceptedBy.profileImage),g.Pc)("alt",(null==e||null==e.acceptedBy?null:e.acceptedBy.firstname)+" "+(null==e||null==e.acceptedBy?null:e.acceptedBy.lastname))}}function N(e,c){if(1&e&&g.ac(0,"img",15),2&e){const e=g.tc().$implicit,c=g.tc(2);g.Ac("src",c.imgUrl+(null==e||null==e.rejectedBy?null:e.rejectedBy.profileImage),g.Pc)("alt",(null==e||null==e.rejectedBy?null:e.rejectedBy.firstname)+" "+(null==e||null==e.rejectedBy?null:e.rejectedBy.lastname))}}function O(e,c){1&e&&g.ac(0,"img",16)}function x(e,c){if(1&e&&(g.ec(0,"div",9),g.ec(1,"div",10),g.ec(2,"h6",11),g.Yc(3),g.dc(),g.dc(),g.ec(4,"p",13),g.Yc(5),g.ac(6,"br"),g.Yc(7),g.dc(),g.ec(8,"small",22),g.Yc(9),g.uc(10,"date"),g.uc(11,"date"),g.dc(),g.dc()),2&e){const e=g.tc().$implicit;g.Mb(3),g.ad("Your Purposal for ",e.service.service," has been accepted"),g.Mb(2),g.bd(" ",null==e||null==e.acceptedBy?null:e.acceptedBy.firstname," ",null==e||null==e.acceptedBy?null:e.acceptedBy.lastname," "),g.Mb(2),g.ad(" ",null==e||null==e.servicerequests?null:e.servicerequests.body," "),g.Mb(2),g.bd("",g.xc(10,6,e.createdAt,"mediumDate","UTC")," | ",g.wc(11,10,e.createdAt,"shortTime"),"")}}function D(e,c){if(1&e&&(g.ec(0,"div",9),g.ec(1,"div",10),g.ec(2,"h6",11),g.Yc(3),g.dc(),g.dc(),g.ec(4,"p",13),g.Yc(5),g.ac(6,"br"),g.Yc(7),g.dc(),g.ec(8,"small",22),g.Yc(9),g.uc(10,"date"),g.uc(11,"date"),g.dc(),g.dc()),2&e){const e=g.tc().$implicit;g.Mb(3),g.ad("Your Purposal for ",e.service.service," has been rejected"),g.Mb(2),g.bd(" ",null==e||null==e.rejectedBy?null:e.rejectedBy.firstname," ",null==e||null==e.rejectedBy?null:e.rejectedBy.lastname," "),g.Mb(2),g.ad(" ",null==e||null==e.servicerequests?null:e.servicerequests.body," "),g.Mb(2),g.bd("",g.xc(10,6,e.createdAt,"mediumDate","UTC")," | ",g.wc(11,10,e.createdAt,"shortTime"),"")}}function T(e,c){if(1&e&&(g.ec(0,"div",6),g.Wc(1,W,1,2,"img",7),g.Wc(2,N,1,2,"img",7),g.Wc(3,O,1,0,"img",8),g.Wc(4,x,12,13,"div",21),g.Wc(5,D,12,13,"div",21),g.dc()),2&e){const e=c.$implicit;g.Mb(1),g.Ac("ngIf",(null==e?null:e.acceptedBy)&&(null==e||null==e.acceptedBy?null:e.acceptedBy.profileImage)),g.Mb(1),g.Ac("ngIf",(null==e?null:e.rejectedBy)&&(null==e||null==e.rejectedBy?null:e.rejectedBy.profileImage)),g.Mb(1),g.Ac("ngIf",!(null!=e&&null!=e.acceptedBy&&e.acceptedBy.profileImage||null!=e&&null!=e.rejectedBy&&e.rejectedBy.profileImage)),g.Mb(1),g.Ac("ngIf",null==e?null:e.acceptedBy),g.Mb(1),g.Ac("ngIf",!(null!=e&&e.acceptedBy))}}function C(e,c){if(1&e&&(g.ec(0,"div",20),g.ec(1,"div",3),g.ec(2,"h2"),g.Yc(3,"Notifications"),g.dc(),g.dc(),g.ec(4,"div",4),g.Wc(5,T,6,5,"div",5),g.dc(),g.dc()),2&e){const e=g.tc();g.Mb(5),g.Ac("ngForOf",e.noti)}}const F=[{path:"",component:(()=>{class e{constructor(e,c,t,n){this.store=e,this.dialog=c,this.router=t,this.notification=n,this.noti=[],this.openDialogReasonForReject=e=>{const c=new p.c;c.disableClose=!1,c.autoFocus=!0,c.data=e,this.dialog.open(B,c).afterClosed().subscribe(e=>{})}}ngOnInit(){const e=function(e=0,c=r.a){return(!Object(o.a)(e)||e<0)&&(e=0),c&&"function"==typeof c.schedule||(c=r.a),new s.a(t=>(t.add(c.schedule(u,e,{subscriber:t,counter:0,period:e})),t))}(1e4);this.subscription=e.subscribe(e=>this.getNotifications()),this.imgUrl=m.a.imgUrl,this.store.pipe(Object(a.t)(d.b)).subscribe(e=>{this.noti=e,console.log("Notifications ...............",this.noti)}),this.store.pipe(Object(a.t)(f.e)).subscribe(e=>{var c;e&&(this.user=e,console.log("User------------",null===(c=this.user)||void 0===c?void 0:c.role))})}getNotifications(){this.store.pipe(Object(a.t)(d.b)).subscribe(e=>{this.noti=e})}serviceDecision(e,c){e&&(console.log("Accepted----------"),this.store.dispatch(Object(b.a)({notificationId:c})))}}return e.\u0275fac=function(c){return new(c||e)(g.Zb(a.h),g.Zb(p.b),g.Zb(i.f),g.Zb(j.a))},e.\u0275cmp=g.Tb({type:e,selectors:[["app-notifications"]],decls:2,vars:2,consts:[["class","tab-pane","id","notifications-cleaner",4,"ngIf"],["class","tab-pane","id","notifications-customer",4,"ngIf"],["id","notifications-cleaner",1,"tab-pane"],[1,"proHead"],[1,"supervisor"],["class","media",4,"ngFor","ngForOf"],[1,"media"],["class","chatImg",3,"src","alt",4,"ngIf"],["src","assets/images/admin.svg","alt","user","class","chatImg",4,"ngIf"],[1,"media-body","ml-4"],[1,"d-flex","justify-content-between","mb-1"],[1,"mb-1"],[1,"dateShow"],[1,"text-muted","mb-3","text-small"],["class","notibtn",4,"ngIf"],[1,"chatImg",3,"src","alt"],["src","assets/images/admin.svg","alt","user",1,"chatImg"],[1,"notibtn"],["type","submit",1,"btn","btn-info","custombtn","blueBtn",3,"click"],["type","submit",1,"btn","btn-info","custombtn","whiteBth","mr15",3,"click"],["id","notifications-customer",1,"tab-pane"],["class","media-body ml-4",4,"ngIf"],[1,"small"]],template:function(e,c){1&e&&(g.Wc(0,q,7,1,"div",0),g.Wc(1,C,6,1,"div",1)),2&e&&(g.Ac("ngIf",2==(null==c.user?null:c.user.role)),g.Mb(1),g.Ac("ngIf",1==(null==c.user?null:c.user.role)))},directives:[n.n,n.m],pipes:[n.e],styles:[""]}),e})(),resolve:{data:l.a}}];let R=(()=>{class e{}return e.\u0275mod=g.Xb({type:e}),e.\u0275inj=g.Wb({factory:function(c){return new(c||e)},imports:[[i.j.forChild(F)],i.j]}),e})();var U=t("PCNd");let Z=(()=>{class e{}return e.\u0275mod=g.Xb({type:e}),e.\u0275inj=g.Wb({factory:function(c){return new(c||e)},imports:[[n.c,U.a,R]]}),e})()}}]);